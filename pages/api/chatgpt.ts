// Next.js API route support: https://nextjs.org/docs/api-routes/introduction
import type { NextApiRequest, NextApiResponse } from 'next'
import { ChatGPTAPI } from 'chatgpt'




export default async function handler(
  req: NextApiRequest,
  res: NextApiResponse,
) {
    const api = new ChatGPTAPI({
        sessionToken: `eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0..tC7HYveKSCzemW4i.KiubTYfuUc4bYzkjjaAoZRerG7ZvadjxSHXJ60L0ifeBO3iwytJDc7D4JLygALqLzbrokf-QPbpAhynZnBRq365UWiERaLlGKieXDJhukL2dM6FJDUQqZAxs7iVCfYPhgi464iNn76WvENXib82nwzrt0X-Ck3bR8lLjXWNiDHYUuM0kx8QcWZWobcOoyuQI83FkBT4Pp0qOxGGrPBSMMG2svfrOtsML7o-cP4zYI7r1gO6Gl_NW18V1OY8Stzfpk_2fxJL8iMO94oNgHS4RsXApXCCsT18s8c_Nsx5kx6dhmVHZpfUle_ZmY1RVij02bQdSuI1hxK5fRn8zeYmr-PyqMnuIwTxj6Jqne2EUMVXg3idNJV7QVDoFmgNNg01UTL5jbchqZmnVOQG1JQ8igZGT7CFeGa0J76S-bXgH2Iukey9rhW3mfvUmHnkDoZ_TK0yPJzdOgP_iZzIp_WmNb0UZ-I5cLxtmEV_w-C-FH_HcFvXHCRHSyQgbsj8WA7xl9QqKKpEDWTKJ1JA1moIKZmBpootWdt-tOTnyL6XCTpU8Y3L2uEHJHNBocW0meG7Rr68l1HAcvyaiBGdSCFiZHOcU8WbmJvCdTuwtId9YDDsinePYbvWwW0wLtsEGsr7tE3dNXI2OH0LI-g0FwvgQpwcMWtDPQXqqvQLNt8YJc6caIyBe6TCPFGXaMf0VT2hx-ldLlXQJ3MQ-_TvaBCvvuqu8P_jVbmfoN0BzSWRJVV0Db5v4EThGygIVnfsO0dpkAo2vCwuJu1FFYi9e3FD2jyWUPLhn3GUnwK-kf_qOeenNyhh6xScbXxZBK9jNLbBZpow-Z7egSqHD9jDp4mE1XcGObOH-h8dw1YoVCE-4ZFodduye32iGR0qv-x2vgt2uUA7RV5DvwwVNBC2MlSEIvTyf6A9NQm-V0Z7T1dYhoSgBr1bgw-sAH73xRrAG6pco4Oicqi95mebNMKwQioo-kMqRs2Aq9YVhdW4OCbiQ9gMGQ5WAeDCus-CL9eIVgCHA4tguKdyDz3PJ4gzFRjketAQJHdhkNt6XvdwRAYYMfYR900KJsk8rIgN7SpggrJZNWh9bgIK8d4rl6eBjj92Q9CqggdbyRayxPCqKJKDXjcorTlK3aIaJrqcnoAkgh5TBJ1SthWP84EQoxPESS-I6ZANesXDmA1Wy_bNwz60eq4VAGEJPz711F0KVUKVDQrKhViZ-8ScCP7Da5-elTneuutdabocGB4Md9urgGz-dcyUtiz7_4gG2r8RKDKstDACOKHqChXT88-DfQVdYFGtDQi4hrCE_WuaA7zfdT0RkMmcy8nUVzU-dipOQbXD6Jcmt3-VvFV1bpKumX0isGWPd37LEQ6-En3-WtyWly-LAhlXspnFt1sYJKEUIf6zgSBD1cipMEZKSlS3JLihhzy9-_mir4t92scA_cggSKUIOxFfWVS33pO_B4OoEi1xlJstquLnRre69RqU0z28_fRUOZK1IUN0wPrEf4ETZwb66ObPT92qm6oJzY3a6J3vFlxKdGvkTFNw3qbiBHMPyDm0xYwowWYMo16Ocmrnptq7Fvw9GYdhnyrUlPNsvTox6giV6MYQvH_PfCcJ4R9HPfSazK56Pa6TKpUQ_RqkTnIFmwDjqI-oycQZZu-UIQLGsjRUsl61Sek2gt1L791hqHuhFQrBsKqRH8khvulePszF-1Ho8W0aNeS4tBek42_VrTV2QM3xhCvk5TMjMhbnY2TJWQAjFkmriNejnMHm8WSJ49p_jW1Nc3Z34u1tQhD5xVYcjnfCTu6SAqzA_kRBCkSKijroTiUToKDX0vnIZnt7Si-1FNFPrsoxtn1zwul6YSVUpfMqHGzog2Ocf0YmNIZxeWeg9zdKpBZ-dI-N8UWlLA7iLucfKiWAWwp2U2szegCxdVqHzFBOTQxtlODDMQFOCg-_Fqcb38nwzwe_eM0scYOmC-b6oUJD805Ht4TKE8s9BIL3xuVb8kVkDSFre0gmR-xr7nq-SMRye6ga_0L-XLPOOemHFmu1ucqD2eXX40idxyPNF2cwH98BSMT6xLnFjiVzTSAtwKh7W7A-SL6dfQGGsHsKmbS6iIpEUZkqtbwMddjIBR35zzsZdlRvZwDujBqYAAXMXaRLzLVzd1bgtF5w6OVMsMB4FRdF32pXGwi7JoGybQSsd2qdDWJF-3dCFKmlD6eGEUNbJ3PrRGs8Gh9CxfVr-v1mWO1vF1jOflxoIzBsngFHuXRC3.jiu9RokLr6zujLdQHhocNg`
    })
    await api.ensureAuth()
    const response = await api.sendMessage(
        req.body.message
    )
    res.status(200).json({ message: response})
}
